# final-report-59
## 1. Metrics

åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯¹è½¯ä»¶çš„å„é¡¹åº¦é‡æŒ‡æ ‡è¿›è¡Œäº†ç»Ÿè®¡ä¸åˆ†æï¼Œä»¥è¯„ä¼°ä»£ç è´¨é‡å’Œå·¥ç¨‹ç»“æ„çš„åˆç†æ€§ã€‚ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„åº¦é‡æŒ‡æ ‡åŠå·¥å…·è¯´æ˜ï¼š

### 1.1 ä»£ç è¡Œæ•°ä¸æºæ–‡ä»¶æ•°é‡

- **æŒ‡æ ‡è¯´æ˜**ï¼šç”¨äºè¯„ä¼°é¡¹ç›®è§„æ¨¡ï¼Œä¾¿äºäº†è§£ä»£ç é‡ä¸æ¨¡å—åˆ’åˆ†æƒ…å†µã€‚

- **ä½¿ç”¨å·¥å…·**ï¼šClocï¼ˆCount Lines of Codeï¼‰

- **å‘½ä»¤ç¤ºä¾‹**ï¼š

  ```bash
  cloc ./frontend
  cloc ./backend
  
  ```

![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\ä»£ç è¡Œæ•°.png)

### 1.2 åœˆå¤æ‚åº¦ï¼ˆCyclomatic Complexityï¼‰

- **æŒ‡æ ‡è¯´æ˜**ï¼šåœˆå¤æ‚åº¦åæ˜ ä»£ç çš„é€»è¾‘å¤æ‚ç¨‹åº¦ï¼Œæœ‰åŠ©äºè¯†åˆ«æ½œåœ¨çš„é«˜é£é™©å‡½æ•°æˆ–æ¨¡å—ã€‚

- **ä½¿ç”¨å·¥å…·**ï¼š

  - å‰ç«¯ï¼šPlatoï¼ˆé€‚ç”¨äº JavaScript/TypeScript é¡¹ç›®ï¼‰
  - åç«¯ï¼šRadonï¼ˆé€‚ç”¨äº Python é¡¹ç›®ï¼‰

- **å‘½ä»¤ç¤ºä¾‹**ï¼š

  ```
  bashå¤åˆ¶ç¼–è¾‘# å‰ç«¯
  plato -r -d report/ ./src
  
  # åç«¯
  radon cc ./backend -a
  ```

![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\åœˆå¤æ‚åº¦.png)
![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\åç«¯å¤æ‚åº¦1.png)
![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\åç«¯å¤æ‚åº¦2.png)

### 1.3 ä¾èµ–æ•°é‡

- **æŒ‡æ ‡è¯´æ˜**ï¼šç»Ÿè®¡é¡¹ç›®æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“æ•°é‡ï¼Œå¯è¯„ä¼°é¡¹ç›®å¯¹å¤–éƒ¨ç»„ä»¶çš„ä¾èµ–ç¨‹åº¦ã€‚

- **ä½¿ç”¨å·¥å…·**ï¼š

  - å‰ç«¯ï¼šnpmï¼ˆé€šè¿‡ `package.json` ç»Ÿè®¡ï¼‰
  - åç«¯ï¼špipdeptreeï¼ˆåŸºäº Python è™šæ‹Ÿç¯å¢ƒï¼‰

- **å‘½ä»¤ç¤ºä¾‹**ï¼š

  ```
  bashå¤åˆ¶ç¼–è¾‘# å‰ç«¯
  npm list --depth=0
  
  # åç«¯
  pipdeptree
  ```

é€šè¿‡ä¸Šè¿°åº¦é‡å·¥å…·å’ŒæŒ‡æ ‡åˆ†æï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç³»ç»Ÿåœ°æŠŠæ¡é¡¹ç›®å¤æ‚åº¦ã€ä¾èµ–æ€§å’Œç»´æŠ¤æˆæœ¬ï¼Œä¸ºåç»­ä¼˜åŒ–ä¸é‡æ„æä¾›æ•°æ®æ”¯æŒã€‚

![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\å‰ç«¯ä¾èµ–1.png)
![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\å‰ç«¯ä¾èµ–2.png)
![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\åç«¯ä¾èµ–1.png)
![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\åç«¯ä¾èµ–2.png)
  




## 2. Documentation

### 2.1 é¢å‘ç”¨æˆ·çš„æ–‡æ¡£

ä½¿ç”¨`Markdown`æ–‡æ¡£ç¼–å†™ï¼Œä¸ºç”¨æˆ·æä¾›å®‰è£…ã€é…ç½®å’Œä½¿ç”¨è½¯ä»¶çš„è¯¦ç»†æŒ‡å¯¼ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹å¹¶æœ‰æ•ˆä½¿ç”¨è½¯ä»¶åŠŸèƒ½ã€‚

#### **å¤§çº²å†…å®¹**
- **å¿«é€Ÿå…¥é—¨æŒ‡å—**ï¼š
    - æœ¬åœ°å®‰è£…å’Œè¿è¡Œ
    - åŸºç¡€ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
- **åŠŸèƒ½**ï¼š
    - æ ¸å¿ƒåŠŸèƒ½æè¿°
- **å¸¸è§é—®é¢˜ä¸è§£å†³**ï¼š
    - åˆ—å‡ºå¸¸è§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚

#### **æ–‡æ¡£å±•ç¤º**
![ç”¨æˆ·æ–‡æ¡£](./iamges/ç”¨æˆ·æ–‡æ¡£.png)


#### **ç”¨æˆ·æ–‡æ¡£è®¿é—®**
- **GitHub README.md**ï¼š[READMEé“¾æ¥](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/README.md)

### 2.2 é¢å‘å¼€å‘è€…çš„æ–‡æ¡£

å¸®åŠ©å¼€å‘è€…ç†è§£è½¯ä»¶çš„è®¾è®¡ã€æ¶æ„å’Œå®ç°ç»†èŠ‚ï¼Œä¾¿äºåç»­ç»´æŠ¤ã€æ‰©å±•æˆ–è´¡çŒ®ä»£ç ã€‚

#### **å®ç°å·¥å…·**
å‰ç«¯ä½¿ç”¨`vue-docgen-api`+`VitePress`è‡ªåŠ¨æå–ç»„ä»¶ä¿¡æ¯å¹¶æ¸²æŸ“ç”Ÿæˆé™æ€ç½‘ç«™ï¼Œåç«¯ä½¿ç”¨`Swagger`è‡ªåŠ¨ç”ŸæˆFastAPIæ–‡æ¡£é¡µé¢

#### **å¤§çº²å†…å®¹**
- **å‰ç«¯ç»„ä»¶**ï¼š
    - æä¾›ç»„ä»¶ä¸­ä½¿ç”¨çš„å˜é‡ã€æ–¹æ³•ç­‰ä¿¡æ¯
- **åç«¯APIæ–‡æ¡£**ï¼š
    - è¯¦ç»†æè¿°æ¥å£ç«¯ç‚¹ã€è¯·æ±‚/å“åº”æ ¼å¼åŠè®¤è¯æ–¹å¼ã€‚

#### **ç¤ºä¾‹**
![å‰ç«¯APIæ–‡æ¡£](./iamges/å‰ç«¯APIæ–‡æ¡£.png)

![åç«¯APIæ–‡æ¡£](./iamges/åç«¯APIæ–‡æ¡£.png)


é€šè¿‡ä»¥ä¸Šæ–‡æ¡£ï¼Œç¡®ä¿æœ€ç»ˆç”¨æˆ·å’Œå¼€å‘è€…èƒ½å¤Ÿé«˜æ•ˆåœ°ä½¿ç”¨ã€ç»´æŠ¤å’Œæ‰©å±•è½¯ä»¶ã€‚

---

## å‰ç«¯å•å…ƒæµ‹è¯•ä»¥åŠE2Eæµ‹è¯•
ä¸ºäº†ä¿è¯å‰ç«¯åº”ç”¨çš„ç¨³å®šæ€§ä¸å¯ç»´æŠ¤æ€§ï¼Œæœ¬é¡¹ç›®åœ¨ä¸åŒæµ‹è¯•å±‚çº§å®æ–½äº†ä»¥ä¸‹æµ‹è¯•ç­–ç•¥ï¼š

### 2.1 å•å…ƒæµ‹è¯•ï¼ˆUnit Testingï¼‰

- **æµ‹è¯•æ¡†æ¶**ï¼šVitest
- **è¯´æ˜**ï¼šVitest æ˜¯ä¸€ä¸ªå¿«é€Ÿã€è½»é‡çš„ Vite åŸç”Ÿå•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œé€‚ç”¨äº Vueã€React ç­‰ç°ä»£å‰ç«¯æ¡†æ¶ã€‚
- **æµ‹è¯•èŒƒå›´**ï¼šç»„ä»¶é€»è¾‘ã€å·¥å…·å‡½æ•°ã€çŠ¶æ€ç®¡ç†é€»è¾‘ç­‰ã€‚
- **æµ‹è¯•å‘½ä»¤**ï¼š
  ```bash
  npm run test
é…ç½®è¯´æ˜ï¼š

æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ä»¥ .test.ts æˆ– .test.js å‘½åã€‚

æµ‹è¯•è¦†ç›–ç‡æ”¯æŒ Istanbul å…¼å®¹æŠ¥å‘Šï¼Œå¯é€šè¿‡ --coverage å‚æ•°ç”Ÿæˆã€‚

ç¤ºä¾‹å‘½ä»¤ï¼š

bash
å¤åˆ¶
ç¼–è¾‘
vitest run --coverage

![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\å‰ç«¯å•å…ƒæµ‹è¯•1.png)
![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\å‰ç«¯å•å…ƒæµ‹è¯•2.png)


### 2.2 ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆEnd-to-End Testingï¼‰
æµ‹è¯•å·¥å…·ï¼šCypress

è¯´æ˜ï¼šCypress æ˜¯ä¸€æ¬¾ç°ä»£åŒ– E2E æµ‹è¯•å·¥å…·ï¼Œæ”¯æŒåœ¨æµè§ˆå™¨ä¸­è‡ªåŠ¨åŒ–æ¨¡æ‹ŸçœŸå®ç”¨æˆ·äº¤äº’ã€‚

æµ‹è¯•èŒƒå›´ï¼šä»é¡µé¢åŠ è½½ã€è¡¨å•äº¤äº’ã€å¯¼èˆªè¡Œä¸ºåˆ°åç«¯ API å“åº”çš„å®Œæ•´æµç¨‹ã€‚

æµ‹è¯•å‘½ä»¤ï¼š

bash
å¤åˆ¶
ç¼–è¾‘
# å¯åŠ¨æµ‹è¯• UI ç•Œé¢
npx cypress open

# æˆ–ä»¥æ— å¤´æ¨¡å¼è¿è¡Œæµ‹è¯•
npx cypress run
é…ç½®è¯´æ˜ï¼š

æ‰€æœ‰æµ‹è¯•è„šæœ¬ä½äº cypress/e2e/ ç›®å½•ä¸‹ã€‚

æµ‹è¯•å‰éœ€ç¡®ä¿å‰ç«¯æœåŠ¡å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œæˆ–åœ¨ cypress.config.ts ä¸­è®¾ç½®è‡ªåŠ¨å¯åŠ¨æœåŠ¡ã€‚
![](C:\Users\bdxly\Desktop\è½¯ä»¶å·¥ç¨‹\team-project-25spring-59\final_report_59\metrics\e2e.png)



## åç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Š

### æ‰€ç”¨æŠ€æœ¯ / å·¥å…· / æ¡†æ¶

æœ¬é¡¹ç›®åç«¯é‡‡ç”¨ **FastAPI** å¼€å‘ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•éƒ¨åˆ†ä½¿ç”¨äº†ä»¥ä¸‹æŠ€æœ¯ä¸å·¥å…·ï¼š

- **pytest**ï¼šä¸»è¦æµ‹è¯•æ‰§è¡Œå™¨å’Œæ–­è¨€æ¡†æ¶ã€‚
- **FastAPI TestClientï¼ˆhttpxï¼‰**ï¼šç”¨äºæµ‹è¯• API æ¥å£ã€‚
- **pytest-cov**ï¼šç”¨äºç»Ÿè®¡æµ‹è¯•è¦†ç›–ç‡ã€‚
- **coverage.py**ï¼šç”Ÿæˆç»ˆç«¯å’Œ HTML æ ¼å¼çš„è¦†ç›–ç‡æŠ¥å‘Šã€‚

------

###  æµ‹è¯•æºç ä¸ç›¸å…³æ–‡ä»¶

- æµ‹è¯•ç›®å½•ä½ç½®ï¼š`/test`

- ä¸»è¦æµ‹è¯•æ–‡ä»¶åŒ…æ‹¬ï¼š

  - `test_course.py`
  - `test_post.py`
  - `test_training.py`
  - `test_mission.py`
  - `test_login.py`

- é¡¹ç›®ç»“æ„ç®€è¦ï¼š

  ```
  bashå¤åˆ¶ç¼–è¾‘SE_pro/
  â”œâ”€â”€ backapp/         â† åç«¯æºä»£ç 
  â””â”€â”€ test/            â† æµ‹è¯•ä»£ç 
  ```

- æµ‹è¯•æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š

  ```
  bash
  
  pytest --cov=backapp --cov-report=term-missing --cov-report=html
  ```

- è¦†ç›–ç‡æŠ¥å‘Šæˆªå›¾ä½äº `htmlcov/index.html`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

  


------

###  æµ‹è¯•æ•ˆæœè¯´æ˜

æˆ‘ä»¬é€šè¿‡ `pytest-cov` å·¥å…·è·å–äº†å¦‚ä¸‹æµ‹è¯•è¦†ç›–æƒ…å†µï¼š

| æ¨¡å—                   | è¦†ç›–ç‡  |
| ---------------------- | ------- |
| åç«¯æ€»è¦†ç›–ç‡           | **75%** |
| CRUD æ¨¡å—              | 74%     |
| æ¨¡å‹å®šä¹‰ï¼ˆmodelsï¼‰     | 98%     |
| ä¸» API è·¯ç”±ï¼ˆmain.pyï¼‰ | 74%     |

![](.\iamges\1.png)

![](.\iamges\2.png)

å½“å‰æµ‹è¯•è¦†ç›–äº†å¤§éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

- ç”¨æˆ·è®­ç»ƒè®°å½•çš„æ–°å¢ã€æ›´æ–°ã€åˆ‡æ¢çŠ¶æ€
- åŠ¨æ€ä¸è¯„è®ºå‘å¸ƒã€ç‚¹èµã€è·å–
- å¥èº«è¯¾ç¨‹ä¸å¥èº«æˆ¿çš„é¢„çº¦ä¸å–æ¶ˆ
- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ä¸ç»Ÿè®¡æ•°æ®æŸ¥è¯¢

------

### æµ‹è¯•è¦†ç›–ç‡è¾ƒä½æ–‡ä»¶åˆ†æ

| æ–‡ä»¶å                         | è¦†ç›–ç‡ | åŸå› åˆ†æ                                                     |
| ------------------------------ | ------ | ------------------------------------------------------------ |
| `backapp/setup.py`             | 0%     | è¯¥æ–‡ä»¶ä»…ç”¨äºåˆå§‹åŒ–è®¾ç½®æˆ–æ•°æ®å¡«å……è„šæœ¬ï¼Œå±äºéƒ¨ç½²è¾…åŠ©è„šæœ¬ï¼Œä¸å±äºè¿è¡ŒæœŸé€»è¾‘ï¼Œå› æ­¤æœªçº³å…¥è‡ªåŠ¨åŒ–æµ‹è¯•èŒƒå›´ã€‚ |
| `backapp/databases/init_db.py` | 39%    | è¯¥æ¨¡å—è´Ÿè´£æ•°æ®åº“åˆå§‹åŒ–å’Œæ¨¡æ‹Ÿæ•°æ®å¡«å……ï¼ŒåŒ…å«å¤§é‡æ•°æ®åº“å†™å…¥é€»è¾‘ï¼Œæµ‹è¯•æ—¶ä¼šå½±å“çœŸå®æ•°æ®ï¼Œå› æ­¤æœªè®¾ç½®è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»…åœ¨å¼€å‘é˜¶æ®µäººå·¥è¿è¡Œã€‚ |

### ä¸»è¦æµ‹è¯•æ–‡ä»¶æµ‹è¯•é—å¤±åˆ†æ

ä»¥main.pyä¸ºä¾‹ï¼Œåƒå‘½ä»¤è¡Œä¸­è¾“å‡ºçš„é—å¤±æµ‹è¯•éƒ¨åˆ†ä¸»è¦ä¸ºä»¥ä¸‹å†…å®¹

- 36-87 åˆå§‹åŒ–æ•°æ®åº“çš„éƒ¨åˆ†ï¼Œæµ‹è¯•å‰æœ¬å°±éœ€è¦å¯åŠ¨æ•°æ®åº“åˆå§‹åŒ–ï¼Œæ— éœ€æµ‹è¯•

  ```python
  @app.on_event("startup")
  def startup_db_client():
      init_db()
      # insert_mock_data()  # ğŸ‘ˆ å¯åŠ¨æ—¶è‡ªåŠ¨æ’å…¥æ•°æ®
      # æ‰§è¡Œ test.sql æ–‡ä»¶
      from sqlalchemy import text
      from databases.database import SessionLocal
      
      try:
         ........
      
  ```

- 239ï¼Œ 244ç­‰ ä¸»è¦ä¸ºraiseé”™è¯¯ï¼Œå·²åŒ…å«åœ¨æµ‹è¯•æ–‡ä»¶ä¸­

  ```
  raise HTTPException(status_code=401, detail="ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯")
  ```

- 381-397ç­‰ï¼Œå¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–è¿”å›

  ```python
   for record in records:
              record_dict = {
                  "id": record.id,
                  "user_id": record.user_id,
                  "start_time": record.start_time,
                  "end_time": record.end_time,
                  "activity_type": record.activity_type,
                  "duration_minutes": record.duration_minutes,
                  "is_completed": record.is_completed,
                  "record_type": record.record_type,
                  "reminder_time": record.reminder_time,
                  "distance": record.distance,
                  "calories": record.calories,
                  "average_heart_rate": record.average_heart_rate,
                  "max_heart_rate": record.max_heart_rate,
                  "minute_heart_rates": record.minute_heart_rates if record.minute_heart_rates else {}
              }
              result.append(record_dict)
  ```

### æµ‹è¯•æ–¹æ³•ç¤ºä¾‹ä¸è®¾è®¡ç­–ç•¥è¯´æ˜

ä¸ºäº†ä¿éšœå¥èº«é¢„çº¦ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§ï¼Œæˆ‘ä»¬è®¾è®¡äº†å¤šç§ç±»å‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ä»¥ä¸‹åˆ—ä¸¾å‡ ä¸ªå…¸å‹æµ‹è¯•æ–¹æ³•ï¼Œè¯´æ˜æˆ‘ä»¬çš„æµ‹è¯•è¦†ç›–ç­–ç•¥ï¼š

------

#### 1. **æ­£å¸¸æµç¨‹éªŒè¯æµ‹è¯•**ï¼ˆHappy Pathï¼‰

```
pythonå¤åˆ¶ç¼–è¾‘def test_reserve_course_successfully():
    payload = {"user_id": 1, "course_id": 12}
    response = client.post("/gym/reserveCourse", json=payload)
    assert response.status_code == 200
```

âœ… **æµ‹è¯•ç›®æ ‡ï¼š** ç¡®ä¿ç”¨æˆ·å¯ä»¥æ­£å¸¸é¢„çº¦æœªæ»¡å‘˜çš„è¯¾ç¨‹ã€‚è¯¥æµ‹è¯•éªŒè¯ç³»ç»Ÿä¸»ä¸šåŠ¡æµç¨‹æ˜¯å¦é¡ºç•…ï¼Œé¿å…ç”¨æˆ·åœ¨æ­£å¸¸æƒ…å†µä¸‹å¤±è´¥ã€‚

------

#### 2. **å¼‚å¸¸æƒ…å†µæµ‹è¯•**ï¼ˆNegative Testingï¼‰

##### 2.1 é‡å¤é¢„çº¦æ‹¦æˆª

```
pythonå¤åˆ¶ç¼–è¾‘def test_reserve_course_falied_alreadyReserved():
    payload = {"user_id": 1, "course_id": 1}
    response = client.post("/gym/reserveCourse", json=payload)
    assert response.status_code == 400
```

##### 2.2 äººæ•°å·²æ»¡å¤±è´¥

```
pythonå¤åˆ¶ç¼–è¾‘def test_reserve_course_failed_capcityOverflowed():
    payload = {"user_id": 1, "course_id": 6}
    response = client.post("/gym/reserveCourse", json=payload)
    assert response.status_code == 400
```

 **æµ‹è¯•ç›®æ ‡ï¼š** æ¨¡æ‹Ÿéæ³•/é‡å¤è¯·æ±‚ä¸è¾¹ç•Œé™åˆ¶ï¼Œå¦‚ï¼šé‡å¤é¢„çº¦ã€è¯¾ç¨‹å·²æ»¡ç­‰ï¼Œæµ‹è¯•ç³»ç»Ÿé˜²å¾¡æ€§ä¸ä¸šåŠ¡çº¦æŸæ˜¯å¦ç”Ÿæ•ˆã€‚

------

#### 3. **æ•°æ®å†…å®¹æ ¡éªŒæµ‹è¯•**

```
pythonå¤åˆ¶ç¼–è¾‘def test_get_gyms():
    response = client.get("/gym/getGyms")
    gyms = response.json()
    expected = [
        {"name": "åŠ¨äº«å¥èº«ä¸­å¿ƒ", "openTime": "06:00:00-23:00:00", "address": "..."},
        ...
    ]
    for i in range(3):
        assert gyms[i]["name"] == expected[i]["name"]
```

âœ…**æµ‹è¯•ç›®æ ‡ï¼š** éªŒè¯æ¥å£è¿”å›çš„æ•°æ®å†…å®¹æ˜¯å¦ç¬¦åˆé¢„æœŸæ ¼å¼ã€å­—æ®µæ˜¯å¦æ­£ç¡®ï¼Œæµ‹è¯•æ•°æ®åˆå§‹åŒ–æ˜¯å¦ç”Ÿæ•ˆã€‚

### æ€»ç»“

| æŒ‡æ ‡               | æ•°æ®                             |
| ------------------ | -------------------------------- |
| è‡ªåŠ¨åŒ–æµ‹è¯•æ–‡ä»¶æ•°é‡ | è¶…è¿‡ 10 ä¸ª                       |
| æ€»ä½“è¦†ç›–ç‡         | **75%**                          |
| ä½¿ç”¨å·¥å…·           | pytest, FastAPI, coverage, httpx |

## 4. Build

### **4.1 æ„å»ºæŠ€æœ¯ã€å·¥å…·ã€æ¡†æ¶ä¸æ–¹æ³•**

*   **å‰ç«¯ (`frontier-app`)**:
    *   **Node.js å’Œ npm**: Node.js ä½œä¸º JavaScript çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚npm ç”¨äºç®¡ç†å‰ç«¯é¡¹ç›®çš„ä¾èµ–åº“ï¼Œå¹¶æ‰§è¡Œæ„å»ºè„šæœ¬ã€‚
    *   **Vite**: ä¸€ä¸ªé«˜æ€§èƒ½çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œç”¨äºç¼–è¯‘ Vue.js å•æ–‡ä»¶ç»„ä»¶ã€TypeScript/JavaScript ä»£ç ã€CSS ç­‰ï¼Œå¹¶è¿›è¡Œä¼˜åŒ–ã€æ‰“åŒ…ï¼Œç”Ÿæˆé™æ€èµ„æºæ–‡ä»¶ã€‚
    *   **Vue.js**: å‰ç«¯æ¡†æ¶ï¼Œé¡¹ç›®çš„ç”¨æˆ·ç•Œé¢åŸºäºæ­¤æ„å»ºã€‚

*   **åç«¯ (`backapp`)**:
    *   **Python å’Œ pip (Pip Installs Packages)**: Python æ˜¯åç«¯æœåŠ¡çš„ä¸»è¦ç¼–ç¨‹è¯­è¨€ã€‚pip ç”¨äºä» Python Package Index (PyPI) å®‰è£…é¡¹ç›®æ‰€éœ€çš„åº“ã€‚
    *   åç«¯çš„â€œæ„å»ºâ€ä¸»è¦é›†ä¸­åœ¨ä¾èµ–å®‰è£…å’Œç¯å¢ƒé…ç½®ä¸Šï¼Œå› ä¸º Python æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œä¸éœ€è¦åƒç¼–è¯‘å‹è¯­è¨€é‚£æ ·çš„æ˜¾å¼ç¼–è¯‘æ­¥éª¤ã€‚
    
*   **æ„å»ºè„šæœ¬ä¸è‡ªåŠ¨åŒ–**:
    *   **æ‰¹å¤„ç†è„šæœ¬ (`build.bat` ) (æœ¬åœ°/Windows)**: ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‰¹å¤„ç†è„šæœ¬ï¼Œè‡ªåŠ¨åŒ–äº†æœ¬åœ°ç¯å¢ƒä¸‹çš„æ„å»ºæ­¥éª¤ï¼ŒåŒ…æ‹¬å‰ç«¯ç¼–è¯‘ã€åç«¯ä¾èµ–å®‰è£…å’Œå‰åç«¯äº§ç‰©æ•´åˆã€‚
    *   **Jenkins (`Jenkinsfile`)**: ç”¨äºæŒç»­é›†æˆï¼ˆCIï¼‰ã€‚`Jenkinsfile` ä¸­å®šä¹‰äº†æ„å»ºé˜¶æ®µï¼Œè‡ªåŠ¨åŒ–ä»ä»£ç æ£€å‡ºåˆ°ç¼–è¯‘æ‰“åŒ…çš„æµç¨‹ã€‚

*   **æ„å»ºæ–¹æ³•**:
    *   å‰ç«¯åº”ç”¨é¦–å…ˆé€šè¿‡ Vite ç‹¬ç«‹ç¼–è¯‘æˆé™æ€èµ„æºã€‚åç«¯åˆ™é€šè¿‡ pip å®‰è£…ä¾èµ–ã€‚éšåï¼Œå‰ç«¯çš„é™æ€äº§ç‰©è¢«æ•´åˆåˆ°åç«¯é¡¹ç›®çš„é™æ€æ–‡ä»¶ç›®å½•ä¸­ã€‚

### **4.2 è‡ªåŠ¨åŒ–æ„å»ºæ‰§è¡Œçš„ä»»åŠ¡**

è‡ªåŠ¨åŒ–æ„å»ºï¼ˆ[`Jenkinsfile`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/Jenkinsfile)ï¼‰æµç¨‹ä¸»è¦æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š

*   **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**
*   **Checkout** 
    *   ä»ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚ Gitï¼‰è·å–æœ€æ–°çš„æºä»£ç ã€‚
*   **Frontend Build**:
    1.  **ä¾èµ–å®‰è£…**: æ‰§è¡Œ `npm install` (æˆ– `npm ci` åœ¨ CI ç¯å¢ƒä¸­)å‘½ä»¤ï¼Œæ ¹æ®[`package.json`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/frontier-app/package.json)ä¸‹è½½å¹¶å®‰è£…æ‰€æœ‰å‰ç«¯ä¾èµ–ã€‚
    2.  **ä»£ç ç¼–è¯‘**: æ‰§è¡Œ `npm run build` å‘½ä»¤ï¼Œå°† Vue.js ç»„ä»¶ã€JavaScript/TypeScript ä»£ç å’Œ CSS ç­‰é™æ€èµ„æºè¿›è¡Œç¼–è¯‘ã€ä»£ç åˆ†å‰²ã€Tree Shakingã€å‹ç¼©å’Œæ··æ·†ã€‚
*   **Backend Build**:
    *   æ‰§è¡Œ `pip install -r requirements.txt` å‘½ä»¤ï¼Œå®‰è£…æ‰€æœ‰åœ¨ [`requirements.txt`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/requirements.txt) ä¸­å£°æ˜çš„ Python ä¾èµ–åŒ…ã€‚
    *   å°†å‰ç«¯æ„å»ºäº§ç‰© (`frontier-app/dist/` ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹) å¤åˆ¶åˆ°åç«¯é¡¹ç›®æŒ‡å®šçš„é™æ€æ–‡ä»¶ç›®å½• (`backapp/static/`)
*   **Wheel Package Build**
    *   å°†æ•´åˆåçš„å‰ç«¯åç«¯ã€requirementç­‰ç”ŸæˆwheelåŒ…
*   **Test Report Generation**:
    *   ä½¿ç”¨ cloc ç»Ÿè®¡å‰ç«¯ä»£ç è¡Œæ•°
    *   ä½¿ç”¨ Plato åˆ†æåœˆå¤æ‚åº¦
    *   ä½¿ç”¨ jq ç»Ÿè®¡ä¾èµ–æ•°é‡
    *   ä½¿ç”¨ pipdeptree å¯¼å‡ºä¾èµ–ç»“æ„
    *   ç”Ÿæˆå‰ç«¯æµ‹è¯•å’Œåç«¯æµ‹è¯•æŠ¥å‘Š
*   **Generate Docs**
    *   ç”Ÿæˆç”¨æˆ·æ–‡æ¡£å’Œå¼€å‘è€…æ–‡æ¡£
*   **Artifact Archiving**
    *   å°†æ‰€æœ‰çš„äº§ç‰©ï¼ˆtest reportã€docsã€wheelåŒ…ï¼‰è¿›è¡Œå½’æ¡£
*   **Deployment**
    *   å°†åº”ç”¨éƒ¨ç½²åˆ°ç›¸åº”ç«¯å£ä¸Š



### 4.3 æˆåŠŸæ„å»ºçš„æœ€ç»ˆäº§ç‰©

*   **å‰ç«¯é™æ€èµ„æº**:
    *   **ä½ç½®**: [`frontier-app/dist/`](https://github.com/sustech-cs304/team-project-25spring-59/tree/frontier-app/dist)
    *   **å†…å®¹**: åŒ…å« HTML, CSS, JavaScript æ–‡ä»¶ä»¥åŠå›¾ç‰‡ç­‰å…¶ä»–é™æ€èµ„æºã€‚è¿™äº›æ–‡ä»¶ç»è¿‡äº†ç¼–è¯‘ã€å‹ç¼©å’Œä¼˜åŒ–ï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€ Web æœåŠ¡å™¨ï¼Œæˆ–ç”±åç«¯åº”ç”¨æä¾›æœåŠ¡ã€‚

*   **é…ç½®å¥½çš„åç«¯åº”ç”¨ä»£ç åŠä¾èµ–**:

    *   **ä½ç½®**: `backapp/`
    *   **å†…å®¹**: åŒ…å«æ‰€æœ‰åç«¯ Python æºä»£ç ï¼Œå¹¶ä¸”å…¶è¿è¡Œæ‰€éœ€çš„ä¾èµ–å·²é€šè¿‡ `pip install -r requirements.txt` åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å‡†å¤‡å¥½

*   **æ•´åˆåçš„åº”ç”¨ç»“æ„**:
    *   **ä½ç½®**: [`backapp/static/`](https://github.com/sustech-cs304/team-project-25spring-59/tree//main/backapp/static)
    *   åŒ…å«å‰ç«¯çš„`dist/`ç›®å½•çš„å†…å®¹

*   **Jenkinsçš„æ„å»ºäº§ç‰©**

    *   åŒ…å«æ‰€æœ‰çš„æµ‹è¯•æŠ¥å‘Šã€wheelåŒ…ã€é™æ€æ–‡ä»¶ã€document

    <img src="./iamges/image-20250604120518931.png" alt="image-20250604120518931" style="zoom:33%;" />

### **4.4 æ„å»ºæ–‡ä»¶/è„šæœ¬**

ä»¥ä¸‹æ˜¯é¡¹ç›®ä¸­ç”¨äºå®šä¹‰å’Œæ‰§è¡Œæ„å»ºè¿‡ç¨‹çš„å…³é”®æ–‡ä»¶å’Œè„šæœ¬ï¼š

* [`package.json`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/frontier-app/package.json):

  *   **ç”¨é€”**: å®šä¹‰å‰ç«¯é¡¹ç›®çš„æ„å»ºå‘½ä»¤ã€‚<img src=".\iamges\image-20250601195230937.png" alt="image-20250601195230937" style="zoom:33%;" />

*  [`requirements.txt`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/requirements.txt) 
  * **ç”¨é€”**: åˆ—å‡ºåç«¯ Python é¡¹ç›®è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–åŒ…ã€‚<img src=".\iamges\image-20250601195256035.png" alt="image-20250601195256035" style="zoom:33%;" />

    

* [`Jenkinsfile`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/Jenkinsfile)

  *   **ç”¨é€”**: å®šä¹‰ Jenkins CI æµæ°´çº¿ä¸­çš„æ„å»ºæ­¥éª¤ã€‚<img src=".\iamges\image-20250601195337242.png" alt="image-20250601195337242" style="zoom:33%;" />

### 4.5 JenkinsæˆåŠŸè¿è¡Œçš„æˆªå›¾

<img src=".\iamges\image-20250601200857252.png" alt="image-20250601200857252" style="zoom:33%;" />

---

## **5. Deployment - Containerization**

### **5.1 å®¹å™¨åŒ–æŠ€æœ¯ã€å·¥å…·ã€æ¡†æ¶ä¸æ–¹æ³•**

*   **Docker**:
    *   **æ ¸å¿ƒæŠ€æœ¯**: Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œå…è®¸å¼€å‘è€…å°†åº”ç”¨åŠå…¶ä¾èµ–æ‰“åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­
    *   **`Dockerfile`**: æ¯ä¸ªéœ€è¦å®¹å™¨åŒ–çš„æœåŠ¡ï¼ˆå‰ç«¯ã€åç«¯ï¼Œæˆ–æ•´åˆåçš„åº”ç”¨ï¼‰éƒ½æœ‰ä¸€ä¸ª `Dockerfile`ã€‚è¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œç”¨äºå‘Šè¯‰ Docker å¦‚ä½•æ„å»ºè¯¥æœåŠ¡çš„é•œåƒã€‚æŒ‡ä»¤åŒ…æ‹¬æŒ‡å®šåŸºç¡€é•œåƒã€å¤åˆ¶æ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ï¼ˆå¦‚å®‰è£…ä¾èµ–ã€è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰å’Œå®šä¹‰å®¹å™¨å¯åŠ¨å‘½ä»¤ã€‚
*   **Docker Compose**:
    *   **å·¥å…·**: Docker Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚
    *   **`docker-compose.yml`**: é€šè¿‡ä¸€ä¸ª YAML æ–‡ä»¶ (`docker-compose.yml`) æ¥é…ç½®åº”ç”¨çš„æœåŠ¡ã€ç½‘ç»œå’Œå·ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥ç”¨ä¸€æ¡å‘½ä»¤ (`docker-compose up`) å¯åŠ¨ã€åœæ­¢å’Œç®¡ç†æ•´ä¸ªåº”ç”¨æ ˆï¼ˆä¾‹å¦‚ï¼Œå‰ç«¯å®¹å™¨ã€åç«¯å®¹å™¨ã€æ•°æ®åº“å®¹å™¨ï¼‰ã€‚
*   **å®¹å™¨åŒ–æ–¹æ³•**:
    *   å‰ç«¯å’Œåç«¯è¢«æ„å»ºä¸ºç‹¬ç«‹çš„ Docker é•œåƒï¼Œå¹¶é€šè¿‡ Docker Compose è¿›è¡Œç¼–æ’ã€‚å‰ç«¯é•œåƒåŒ…å«ä¸€ä¸ª Web æœåŠ¡å™¨ï¼ˆNginxï¼‰æ¥æœåŠ¡é™æ€æ–‡ä»¶ï¼Œåç«¯é•œåƒåŒ…å«åº”ç”¨æœåŠ¡å™¨ï¼ˆUvicornï¼‰æ¥è¿è¡Œ FastAPI åº”ç”¨ã€‚

### **5.2 å®¹å™¨åŒ–è„šæœ¬**

*   **å‰ç«¯çš„[`frontier-app/Dockerfile`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/frontier-app/Dockerfile)**:
    
    * **ç”¨é€”**: éƒ¨ç½²å‰ç«¯
    
      <img src="./iamges/image-20250604120847100.png" alt="image-20250604120847100" style="zoom:33%;" />
    
*   **åç«¯çš„[`backapp/Dockerfile`](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/backapp/Dockerfile)**:
    
    *   **ç”¨é€”**: æ„å»ºåç«¯<img src="./iamges/image-20250604120910176.png" alt="image-20250604120910176" style="zoom:33%;" />
    
*   **[nginx.conf](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/frontier-app/nginx.conf) (Nginx é…ç½®æ–‡ä»¶)**:
    
    *   **ç”¨é€”**: é…ç½® Nginx æœåŠ¡å‰ç«¯SPAï¼Œç¡®ä¿è·¯ç”±æ­£ç¡®ã€‚<img src=".\iamges\image-20250601200219167.png" alt="image-20250601200219167" style="zoom:33%;" />
    
*   **[docker-compose.yml](https://github.com/sustech-cs304/team-project-25spring-59/blob/main/docker-compose.yml)**:
    
    *   **ç”¨é€”**: å®šä¹‰å’Œç¼–æ’å¤šå®¹å™¨åº”ç”¨ï¼ˆå‰ç«¯ã€åç«¯ã€æ•°æ®åº“ï¼‰ã€‚<img src="./iamges/image-20250604120935724.png" alt="image-20250604120935724" style="zoom:33%;" />
    
    
    
    

### **5.3 æˆåŠŸå®¹å™¨åŒ–**

1.  **`docker images` å‘½ä»¤æ˜¾ç¤ºæ–°æ„å»ºçš„é•œåƒ**:
    æ‰§è¡Œ `docker ps` å‘½ä»¤,æŸ¥çœ‹æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå‰ç«¯å’Œåç«¯æ­£å¸¸è¿è¡Œã€‚<img src=".\iamges\image-20250601200522340.png">
2.  **åº”ç”¨å¯è®¿é—®å’ŒåŠŸèƒ½æ­£å¸¸**:
    *   **å‰ç«¯**: åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä¸ºå‰ç«¯æœåŠ¡æ˜ å°„çš„ä¸»æœºç«¯å£ï¼ˆ `http://localhost:80`ï¼‰ï¼Œèƒ½çœ‹åˆ°åº”ç”¨ç•Œé¢å¹¶èƒ½ä¸ä¹‹äº¤äº’ã€‚
    *   **åç«¯**: åç«¯ API ç«¯ç‚¹èƒ½é€šè¿‡æ˜ å°„çš„ç«¯å£ï¼ˆä¾‹å¦‚ `http://localhost:8000`ï¼‰è¢«è®¿é—®ï¼Œå¹¶ä¸”å‰ç«¯å‘èµ·çš„ API è¯·æ±‚èƒ½å¾—åˆ°æ­£ç¡®å“åº”ã€‚
3.  **ä¸Šä¼ åˆ° docker hub ä¸Š**![image-20250604120202004](./iamges/image-20250604120202004.png)

